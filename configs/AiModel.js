const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate a detailed travel itinerary for Kerala, India for 6 days and 5 nights for Just Me within a Moderate budget. The response must be in JSON format only, containing: {\"FlightDetails\": {\"options\": [], \"prices\": [], \"bookingURLs\": []}, \"Hotels\": [{\"name\": \"\", \"address\": \"\", \"price\": \"\", \"imageURL\": \"\", \"geoCoordinates\": \"\", \"rating\": \"\", \"description\": \"\"}], \"Itinerary\": [{\"day\": 1, \"places\": [{\"name\": \"\", \"details\": \"\", \"imageURL\": \"\", \"geoCoordinates\": \"\", \"ticketPricing\": \"\", \"travelTime\": \"\", \"bestTimeToVisit\": \"\"}]}], \"TravelSummary\": {\"destination\": \"{location}\", \"travelDates\": \"From {startDate} to {endDate}\", \"totalDays\": 6, \"totalNights\": 5}}. Response Rules: The response should be in valid JSON format. Do not include any extra text, explanations, or placeholders. Ensure all required details are included in the JSON output every time. Tailor the recommendations based on the location, including top attractions, cultural spots, and must-visit places.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"FlightDetails\": {\n    \"options\": [],\n    \"prices\": [],\n    \"bookingURLs\": []\n  },\n  \"Hotels\": [\n    {\n      \"name\": \"Old Harbour Hotel (Fort Kochi)\",\n      \"address\": \"1/328, KB Jacob Rd, Fort Kochi, Kochi, Kerala 682001, India\",\n      \"price\": \"₹2500-₹4000/night\",\n      \"imageURL\": \"https://example.com/oldharbourhotel.jpg\",\n      \"geoCoordinates\": \"9.9613° N, 76.2448° E\",\n      \"rating\": \"4.5\",\n      \"description\": \"Boutique hotel with colonial architecture and a relaxed atmosphere.\"\n    },\n    {\n      \"name\": \"SpiceTree Boutique Hotel (Munnar)\",\n      \"address\": \"P.O. Box No. 17, Muttukad-Periyakanal Road, Bison Valley, Munnar, Kerala 685612, India\",\n      \"price\": \"₹3000-₹5000/night\",\n      \"imageURL\": \"https://example.com/spicetreehotel.jpg\",\n      \"geoCoordinates\": \"10.0638° N, 77.0603° E\",\n      \"rating\": \"4.7\",\n      \"description\": \"Luxury boutique hotel surrounded by tea plantations, offering stunning views.\"\n    },\n    {\n      \"name\": \"Zostel Alleppey\",\n      \"address\": \"Punnamada Finishing Point, Alleppey, Kerala 688013, India\",\n      \"price\": \"₹800-₹1500/night\",\n      \"imageURL\": \"https://example.com/zostelalleppey.jpg\",\n      \"geoCoordinates\": \"9.4977° N, 76.3173° E\",\n      \"rating\": \"4.2\",\n      \"description\": \"Budget-friendly hostel with a social atmosphere, close to Alleppey's backwaters.\"\n    }\n  ],\n  \"Itinerary\": [\n    {\n      \"day\": 1,\n      \"places\": [\n        {\n          \"name\": \"Fort Kochi\",\n          \"details\": \"Explore the historic Fort Kochi, including the Chinese fishing nets, St. Francis Church, and the Dutch Cemetery. Wander through the spice markets and enjoy the colonial architecture.\",\n          \"imageURL\": \"https://example.com/fortkochi.jpg\",\n          \"geoCoordinates\": \"9.9629° N, 76.2444° E\",\n          \"ticketPricing\": \"Free (entry to some sites may have a small fee)\",\n          \"travelTime\": \"Arrival Day\",\n          \"bestTimeToVisit\": \"Morning or late afternoon to avoid heat\"\n        },\n        {\n          \"name\": \"Kerala Kathakali Centre\",\n          \"details\": \"Experience a Kathakali performance, a traditional dance form of Kerala. Learn about the elaborate costumes and makeup.\",\n          \"imageURL\": \"https://example.com/kathakalicentre.jpg\",\n          \"geoCoordinates\": \"9.9636° N, 76.2436° E\",\n          \"ticketPricing\": \"₹300-₹500\",\n          \"travelTime\": \"Evening\",\n          \"bestTimeToVisit\": \"Evening for the performance\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"places\": [\n        {\n          \"name\": \"Mattancherry Palace (Dutch Palace)\",\n          \"details\": \"Visit the Mattancherry Palace, showcasing Kerala murals and artifacts. Learn about the history of the Kochi royal family.\",\n          \"imageURL\": \"https://example.com/mattancherrypalace.jpg\",\n          \"geoCoordinates\": \"9.9548° N, 76.2505° E\",\n          \"ticketPricing\": \"₹5\",\n          \"travelTime\": \"Morning\",\n          \"bestTimeToVisit\": \"Morning to avoid crowds\"\n        },\n        {\n          \"name\": \"Jewish Synagogue (Paradesi Synagogue)\",\n          \"details\": \"Explore the Paradesi Synagogue, the oldest active synagogue in the Commonwealth countries. Admire the hand-painted Chinese tiles and Belgian chandeliers.\",\n          \"imageURL\": \"https://example.com/jewishsynagogue.jpg\",\n          \"geoCoordinates\": \"9.9543° N, 76.2507° E\",\n          \"ticketPricing\": \"₹5\",\n          \"travelTime\": \"Afternoon\",\n          \"bestTimeToVisit\": \"Afternoon (closed on Fridays, Saturdays, and Jewish holidays)\"\n        },\n        {\n          \"name\": \"Ferry to Ernakulam\",\n          \"details\": \"Take a ferry from Fort Kochi to Ernakulam. Experience the local transportation and enjoy the views of the Kochi harbor. Explore Marine Drive in Ernakulam in the evening.\",\n          \"imageURL\": \"https://example.com/ferry.jpg\",\n          \"geoCoordinates\": \"9.9615° N, 76.2454° E\",\n          \"ticketPricing\": \"₹10-₹20\",\n          \"travelTime\": \"Evening\",\n          \"bestTimeToVisit\": \"Evening for cooler temperatures\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"places\": [\n        {\n          \"name\": \"Travel to Munnar\",\n          \"details\": \"Travel from Kochi to Munnar (approx. 4 hours by bus or taxi). Enjoy the scenic drive through the Western Ghats, passing by waterfalls and spice plantations.\",\n          \"imageURL\": \"https://example.com/munnar.jpg\",\n          \"geoCoordinates\": \"10.0965° N, 77.0593° E\",\n          \"ticketPricing\": \"₹500-₹2000 (transportation)\",\n          \"travelTime\": \"Full Day\",\n          \"bestTimeToVisit\": \"Anytime (plan for travel time)\"\n        },\n        {\n          \"name\": \"Tea Gardens Visit\",\n          \"details\": \"Explore the lush green tea gardens of Munnar. Take a stroll through the plantations and learn about the tea-making process.\",\n          \"imageURL\": \"https://example.com/teagardens.jpg\",\n          \"geoCoordinates\": \"10.0974° N, 77.0594° E\",\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"Afternoon\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        }\n      ]\n    },\n    {\n      \"day\": 4,\n      \"places\": [\n        {\n          \"name\": \"Mattupetty Dam\",\n          \"details\": \"Visit the Mattupetty Dam, a picturesque reservoir surrounded by hills and forests. Enjoy boating on the lake and the scenic views.\",\n          \"imageURL\": \"https://example.com/mattupettydam.jpg\",\n          \"geoCoordinates\": \"10.0974° N, 77.1316° E\",\n          \"ticketPricing\": \"₹10 (entry), ₹300 (boating)\",\n          \"travelTime\": \"Morning\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Echo Point\",\n          \"details\": \"Visit Echo Point, known for its natural echo phenomenon. Shout out and hear your voice reverberate through the hills.\",\n          \"imageURL\": \"https://example.com/echopoint.jpg\",\n          \"geoCoordinates\": \"10.0973° N, 77.1323° E\",\n          \"ticketPricing\": \"₹30\",\n          \"travelTime\": \"Afternoon\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"name\": \"Top Station\",\n          \"details\": \"Visit Top Station for panoramic views of the Western Ghats and the surrounding valleys (Consider if time allows).\",\n          \"imageURL\": \"https://example.com/topstation.jpg\",\n          \"geoCoordinates\": \"10.0883° N, 77.1443° E\",\n          \"ticketPricing\": \"₹50\",\n          \"travelTime\": \"Afternoon\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        }\n      ]\n    },\n    {\n      \"day\": 5,\n      \"places\": [\n        {\n          \"name\": \"Travel to Alleppey (Alappuzha)\",\n          \"details\": \"Travel from Munnar to Alleppey (approx. 5 hours by bus or taxi). Check into your accommodation and prepare for your houseboat experience.\",\n          \"imageURL\": \"https://example.com/alleppey.jpg\",\n          \"geoCoordinates\": \"9.4981° N, 76.3325° E\",\n          \"ticketPricing\": \"₹500-₹2000 (transportation)\",\n          \"travelTime\": \"Full Day\",\n          \"bestTimeToVisit\": \"Anytime (plan for travel time)\"\n        },\n        {\n          \"name\": \"Alleppey Backwaters Houseboat\",\n          \"details\": \"Enjoy a houseboat cruise through the Alleppey backwaters. Experience the serene beauty of the canals, villages, and paddy fields. Includes meals and overnight stay on the houseboat. (Consider sharing a houseboat to reduce cost if possible)\",\n          \"imageURL\": \"https://example.com/houseboat.jpg\",\n          \"geoCoordinates\": \"9.4979° N, 76.3319° E\",\n          \"ticketPricing\": \"₹4000-₹8000 (for a single person, consider sharing)\",\n          \"travelTime\": \"Evening and Overnight\",\n          \"bestTimeToVisit\": \"Evening\"\n        }\n      ]\n    },\n    {\n      \"day\": 6,\n      \"places\": [\n        {\n          \"name\": \"Alleppey Backwaters Houseboat (Continued)\",\n          \"details\": \"Continue your houseboat cruise in the morning. Enjoy the sunrise over the backwaters and soak in the peaceful atmosphere.\",\n          \"imageURL\": \"https://example.com/houseboatmorning.jpg\",\n          \"geoCoordinates\": \"9.4979° N, 76.3319° E\",\n          \"ticketPricing\": \"Included in the houseboat package\",\n          \"travelTime\": \"Morning\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Departure from Kochi (or Alleppey)\",\n          \"details\": \"After the houseboat cruise, travel from Alleppey to Kochi International Airport (COK) (approx. 2 hours by taxi) or depart from Alleppey based on your travel arrangements.\",\n          \"imageURL\": \"https://example.com/kochiairport.jpg\",\n          \"geoCoordinates\": \"10.1667° N, 76.3986° E\",\n          \"ticketPricing\": \"₹800-₹1500 (taxi to Kochi)\",\n          \"travelTime\": \"Afternoon\",\n          \"bestTimeToVisit\": \"Based on your flight schedule\"\n        }\n      ]\n    }\n  ],\n  \"TravelSummary\": {\n    \"destination\": \"Kerala, India\",\n    \"travelDates\": \"From {startDate} to {endDate}\",\n    \"totalDays\": 6,\n    \"totalNights\": 5\n  }\n}\n```"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
