const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate a detailed travel itinerary for Kerala, India for 6 days and 5 nights for A Couple within a Luxury budget. The response must be in JSON format only, containing: {\"FlightDetails\": {\"options\": [], \"prices\": [], \"bookingURLs\": []}, \"Hotels\": [{\"name\": \"\", \"address\": \"\", \"price\": \"\", \"imageURL\": \"\", \"geoCoordinates\": \"\", \"rating\": \"\", \"description\": \"\"}], \"PlacesToVisit\": [{\"name\": \"\", \"details\": \"\", \"imageURL\": \"\", \"geoCoordinates\": \"\", \"ticketPricing\": \"\", \"travelTime\": \"\"}], \"Itinerary\": [{\"day\": 1, \"places\": [{\"name\": \"\", \"bestTimeToVisit\": \"\"}]}]}. Response Rules: The response should be in valid JSON format. Do not include any extra text, explanations, or placeholders. Ensure all required details are included in the JSON output every time.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"FlightDetails\": {\n    \"options\": [\n      \"Direct Flight from Major City to Cochin International Airport (COK)\",\n      \"Connecting Flight from Major City to Cochin International Airport (COK)\"\n    ],\n    \"prices\": [\n      \"₹25,000 - ₹40,000 (Direct)\",\n      \"₹18,000 - ₹30,000 (Connecting)\"\n    ],\n    \"bookingURLs\": [\n      \"www.makemytrip.com\",\n      \"www.goibibo.com\"\n    ]\n  },\n  \"Hotels\": [\n    {\n      \"name\": \"The Oberoi Vrinda, Backwaters Cruiser\",\n      \"address\": \"Alleppey, Kerala\",\n      \"price\": \"₹75,000 - ₹1,20,000/night\",\n      \"imageURL\": \"https://www.oberoihotels.com/hotels-in-kerala-vrinda-cruiser/\",\n      \"geoCoordinates\": \"9.5375° N, 76.3433° E\",\n      \"rating\": \"5.0\",\n      \"description\": \"Luxury backwater cruise experience with private cabins and gourmet dining.\"\n    },\n    {\n      \"name\": \"Brunton Boatyard - CGH Earth\",\n      \"address\": \"Fort Kochi, Kerala\",\n      \"price\": \"₹18,000 - ₹35,000/night\",\n      \"imageURL\": \"https://www.cghearth.com/brunton-boatyard\",\n      \"geoCoordinates\": \"9.9629° N, 76.2433° E\",\n      \"rating\": \"4.5\",\n      \"description\": \"Heritage hotel with colonial architecture and stunning views of the harbor.\"\n    },\n    {\n      \"name\": \"Taj Kumarakom Resort & Spa, Kerala\",\n      \"address\": \"Kumarakom, Kerala\",\n      \"price\": \"₹20,000 - ₹40,000/night\",\n      \"imageURL\": \"https://www.tajhotels.com/en-in/taj/taj-kumarakom-resort-spa-kerala/\",\n      \"geoCoordinates\": \"9.6255° N, 76.4336° E\",\n      \"rating\": \"4.6\",\n      \"description\": \"Luxury resort on the banks of Vembanad Lake, offering Ayurvedic treatments and backwater experiences.\"\n    },\n    {\n      \"name\": \"The Leela Raviz Kovalam, Kerala\",\n      \"address\": \"Kovalam, Kerala\",\n      \"price\": \"₹25,000 - ₹50,000/night\",\n      \"imageURL\": \"https://www.theleela.com/leela-raviz-kovalam\",\n      \"geoCoordinates\": \"8.4051° N, 76.9778° E\",\n      \"rating\": \"4.7\",\n      \"description\": \"Luxury resort on a cliff top overlooking the Arabian Sea, with private beaches and infinity pools.\"\n    }\n  ],\n  \"PlacesToVisit\": [\n    {\n      \"name\": \"Fort Kochi\",\n      \"details\": \"Historical area with Dutch, Portuguese, and British influences. Visit the Chinese fishing nets, St. Francis Church, and explore the spice markets.\",\n      \"imageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/ChineseFishingNetsKochi.jpg/1280px-ChineseFishingNetsKochi.jpg\",\n      \"geoCoordinates\": \"9.9616° N, 76.2431° E\",\n      \"ticketPricing\": \"Free (entry to area); Church and museums have nominal fees.\",\n      \"travelTime\": \"Variable, depending on location; allow 1-2 days.\"\n    },\n    {\n      \"name\": \"Alleppey Backwaters\",\n      \"details\": \"Experience a houseboat cruise through the serene backwaters, passing through villages, paddy fields, and coconut groves. Enjoy traditional Kerala cuisine onboard.\",\n      \"imageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Kerala_backwaters_sunset.jpg/1280px-Kerala_backwaters_sunset.jpg\",\n      \"geoCoordinates\": \"9.4981° N, 76.3388° E\",\n      \"ticketPricing\": \"₹15,000 - ₹50,000 (Houseboat for 1-2 nights)\",\n      \"travelTime\": \"1-3 days\"\n    },\n    {\n      \"name\": \"Munnar Tea Plantations\",\n      \"details\": \"Visit lush green tea plantations, hike through the hills, and enjoy panoramic views. Explore the Tea Museum and sample different varieties of tea.\",\n      \"imageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Munnar_Tea_Plantations.jpg/1280px-Munnar_Tea_Plantations.jpg\",\n      \"geoCoordinates\": \"10.0967° N, 77.0599° E\",\n      \"ticketPricing\": \"Entry fees to Tea Museum and some viewpoints (₹50 - ₹200)\",\n      \"travelTime\": \"2-3 days\"\n    },\n    {\n      \"name\": \"Kovalam Beach\",\n      \"details\": \"Relax on the golden sands of Kovalam Beach, enjoy swimming and sunbathing, and indulge in Ayurvedic massages. Visit the lighthouse for stunning views.\",\n      \"imageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Kovalam_beach_Kerala.jpg/1280px-Kovalam_beach_Kerala.jpg\",\n      \"geoCoordinates\": \"8.4029° N, 76.9789° E\",\n      \"ticketPricing\": \"Free (entry to beach); fees for water sports and Ayurvedic treatments vary.\",\n      \"travelTime\": \"1-2 days\"\n    },\n        {\n      \"name\": \"Periyar National Park\",\n      \"details\": \"Explore the Periyar National Park for wildlife spotting. Enjoy a boat ride on the Periyar Lake. Visit the spice plantations in the region.\",\n      \"imageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Periyar_National_Park.jpg/1280px-Periyar_National_Park.jpg\",\n      \"geoCoordinates\": \"9.4637° N, 77.1571° E\",\n      \"ticketPricing\": \"Approx. ₹500 - ₹1500 (Entry and activities)\",\n      \"travelTime\": \"2 Days\"\n    }\n  ],\n  \"Itinerary\": [\n    {\n      \"day\": 1,\n      \"places\": [\n        {\n          \"name\": \"Cochin International Airport (COK)\",\n          \"bestTimeToVisit\": \"Arrival time\"\n        },\n        {\n          \"name\": \"Brunton Boatyard - CGH Earth, Fort Kochi\",\n          \"bestTimeToVisit\": \"Afternoon (Check-in and relaxation)\"\n        },\n        {\n          \"name\": \"Fort Kochi - Chinese Fishing Nets, St. Francis Church\",\n          \"bestTimeToVisit\": \"Late Afternoon/Evening\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"places\": [\n        {\n          \"name\": \"Fort Kochi - Spice Markets, Dutch Palace\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Drive to Alleppey (approx. 1.5-2 hours)\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"name\": \"Check-in to The Oberoi Vrinda, Backwaters Cruiser\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"name\": \"Backwater Cruise\",\n          \"bestTimeToVisit\": \"Afternoon/Evening\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"places\": [\n        {\n          \"name\": \"Backwater Cruise - Alleppey\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Check-out from Houseboat & Drive to Kumarakom (approx. 1 hour)\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"name\": \"Taj Kumarakom Resort & Spa, Kerala\",\n          \"bestTimeToVisit\": \"Afternoon (Check-in and relaxation/Ayurvedic Treatment)\"\n        },\n        {\n          \"name\": \"Sunset boat ride on Vembanad Lake\",\n          \"bestTimeToVisit\": \"Late Afternoon\"\n        }\n      ]\n    },\n    {\n      \"day\": 4,\n      \"places\": [\n        {\n          \"name\": \"Drive to Thekkady (Periyar) (approx. 3-4 hours)\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Check-in to hotel in Thekkady\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"name\": \"Periyar National Park - Boat safari on Periyar Lake\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        }\n      ]\n    },\n    {\n      \"day\": 5,\n      \"places\": [\n        {\n          \"name\": \"Periyar National Park - Spice Plantation Visit\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Drive to Kovalam (approx. 4-5 hours)\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"name\": \"Check-in to The Leela Raviz Kovalam, Kerala\",\n          \"bestTimeToVisit\": \"Evening\"\n        },\n        {\n          \"name\": \"Relax on Kovalam Beach\",\n          \"bestTimeToVisit\": \"Evening\"\n        }\n      ]\n    },\n    {\n      \"day\": 6,\n      \"places\": [\n        {\n          \"name\": \"Kovalam Beach - Lighthouse visit, Ayurvedic massage\",\n          \"bestTimeToVisit\": \"Morning\"\n        },\n        {\n          \"name\": \"Departure from Trivandrum International Airport (TRV)\",\n          \"bestTimeToVisit\": \"Afternoon/Evening\"\n        }\n      ]\n    }\n  ]\n}\n```"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
